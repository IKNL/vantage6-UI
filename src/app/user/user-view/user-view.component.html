<mat-expansion-panel>
  <mat-expansion-panel-header>
    <mat-panel-title>
      {{user.first_name}} {{user.last_name}}
    </mat-panel-title>
    <mat-panel-description>
      <div *ngIf="user.is_logged_in">
        It's you!
      </div>
    </mat-panel-description>
  </mat-expansion-panel-header>
  <table style="width: 100%">
    <colgroup>
      <col span="1" style="width: 20%;"/>
      <col span="1" style="width: 80%;"/>
    </colgroup>
    <tr>
      <td>Username:</td>
      <td>{{user.username}}</td>
    </tr>
    <tr>
      <td>Email:</td>
      <td>{{user.email}}</td>
    </tr>
    <tr>
      <td>Role(s):</td>
      <td>
        <div *ngFor="let role of user.roles" class="inline">
            <button mat-button class="btn-detail inline" disabled>
              {{role.name}}
            </button>
        </div>
        <div *ngIf="user.roles.length===0">
          This user has no roles!
        </div>
      </td>
    </tr>
    <tr *ngIf="user.rules.length > 0">
      <td>Extra rules:</td>
      <td>
        <div *ngFor="let rule of user.rules" class="inline">
          <button mat-button class="btn-detail inline" disabled>
            {{rule.operation}} {{rule.resource}} ({{rule.scope}})
          </button>
        </div>
      </td>
    </tr>
  </table>
  <button *ngIf="
        userPermission.can('edit', 'user', user.organization_id) ||
        (user.is_logged_in && userPermission.hasPermission('edit', 'user', 'own'))"
      mat-button class="btn btn-edit inline"
      (click)="editUser()"
      [routerLink]="['/user', user.id, 'edit']"
      >
    Edit
  </button>
  <button *ngIf="
        userPermission.can('delete', 'user', user.organization_id) ||
        (user.is_logged_in && userPermission.hasPermission('delete', 'user', 'own'))"
      mat-button class="btn btn-delete-strong"
      (click)="deleteUser()">
    Delete
  </button>
</mat-expansion-panel>